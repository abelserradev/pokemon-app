<app-header></app-header>
<main>
  @if (loadingState$ | async; as loadingState) {
    @if (loadingState.isLoading && loadingState.showOverlay) {
      <app-loading
        [message]="loadingState.message || 'Cargando...'"
        [subMessage]="loadingState.subMessage || 'Preparando...'"
        [showOverlay]="loadingState.showOverlay || true">
      </app-loading>
    }
  }

  <router-outlet></router-outlet>
</main>

<app-footer></app-footer>

<!-- Modal Global -->
@if (modalConfig$ | async; as modalConfig) {
  <app-modal
    [isVisible]="modalConfig.isVisible"
    [title]="modalConfig.title"
    [message]="modalConfig.message"
    [type]="modalConfig.type"
    [showCancelButton]="modalConfig.showCancelButton"
    [confirmText]="modalConfig.confirmText"
    [cancelText]="modalConfig.cancelText"
    (confirmed)="onModalConfirm()"
    (cancelled)="onModalCancel()"
    (closed)="onModalClose()">
  </app-modal>
}